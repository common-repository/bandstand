require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){"use strict";var c,d,e,f,g="undefined"!=typeof window?window.jQuery:"undefined"!=typeof b?b.jQuery:null,h=a("bandstand"),i="undefined"!=typeof window?window.Backbone:"undefined"!=typeof b?b.Backbone:null,j=g("#gig-time"),k=sessionStorage||{},l="lastGigTime"in k?new Date(k.lastGigTime):null,m=g("#gig-venue-id"),n=a("./gigs/views/meta-box/gig-venue"),o=a("./gigs/models/venue"),p=a("./gigs/views/frame/venue");e=h.settings(_bandstandGigEditSettings),e=h.settings(_bandstandVenueManagerSettings),j.timepicker({scrollDefaultTime:l||"",timeFormat:e.timeFormat,className:"ui-autocomplete"}).on("showTimepicker",function(){g(this).addClass("open"),g(".ui-timepicker-list").width(g(this).outerWidth())}).on("hideTimepicker",function(){g(this).removeClass("open")}).next().on("click",function(){j.focus()}),g("#publish").on("click",function(){var a=j.timepicker("getTime");k&&""!==a&&(k.lastGigTime=a)}),c=new Pikaday({bound:!1,container:document.getElementById("bandstand-gig-start-date-picker"),field:g(".bandstand-gig-date-picker-start").find("input").get(0),format:"YYYY/MM/DD",i18n:_pikadayL10n||{},isRTL:isRtl,theme:"bandstand-pikaday"}),d=new p({title:h.l10n.venues||"Venues",button:{text:h.l10n.selectVenue||"Select Venue"}}),d.on("close",function(){var a=f.get("venue");a.get("id")&&a.fetch()}),d.on("insert",function(a){f.set("venue",a.first()),m.val(a.first().get("id"))}),f=new i.Model({frame:d,venue:new o(e.venue||{})}),new n({controller:f}).render(),g(window).on("keyup",function(a){d.$el.is(":visible")&&"venues"===d.state().id&&(38===a.keyCode&&d.state().previous(),40===a.keyCode&&d.state().next())}),e=h.settings(_bandstandGigEditSettings),e=h.settings(_bandstandVenueManagerSettings)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./gigs/models/venue":5,"./gigs/views/frame/venue":12,"./gigs/views/meta-box/gig-venue":14,bandstand:"bandstand"}],2:[function(a,b,c){(function(c){"use strict";var d,e=("undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null).api.WPApiBaseCollection,f=a("bandstand").settings(),g=a("../models/venue");d=e.extend({model:g,url:function(){return f.restUrl+"bandstand/v1/venues"},observe:function(a){var b=this;a.on("change",function(a){b.set(a,{add:!1,remove:!1})})}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/venue":5,bandstand:"bandstand"}],3:[function(a,b,c){(function(c){"use strict";var d,e=a("bandstand").l10n,f=a("../models/venue"),g="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=g.media.controller.State.extend({defaults:{id:"venue-add",title:e.addNewVenue||"Add New Venue",button:{text:e.save||"Save"},content:"venue-add",menu:"default",menuItem:{text:e.addVenue||"Add a Venue",priority:20},toolbar:"venue-add"},initialize:function(){this.set("model",new f({status:"publish"}))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/venue":5,bandstand:"bandstand"}],4:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,f=a("bandstand").l10n,g=a("../collections/venues"),h="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=h.media.controller.State.extend({defaults:{id:"venues",title:f.venues||"Venues",button:{text:f.select||"Select"},content:"venues-manager",menu:"default",menuItem:{text:f.manageVenues||"Manage Venues",priority:10},mode:"view",provider:"venues",toolbar:"venues"},initialize:function(a){var b=a.results||new g,c=a.venues||new g;this.set("results",b),this.set("venues",c),this.set("selection",new g),this.set("selectedItem",e.$()),b.observe(c),c.observe(b)},next:function(){var a=this.get("provider"),b=this.get(a),c=b.indexOf(this.get("selection").at(0));b.length-1!==c&&this.get("selection").reset(b.at(c+1))},previous:function(){var a=this.get("provider"),b=this.get(a),c=b.indexOf(this.get("selection").at(0));0!==c&&this.get("selection").reset(b.at(c-1))},search:function(a){return a.length<3?(this.get("results").reset(),void this.set("provider","venues")):(this.set("provider","results"),void this.get("results").fetch({data:{search:a},reset:!0}))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collections/venues":2,bandstand:"bandstand"}],5:[function(a,b,c){(function(c){"use strict";var d,e=("undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null).api.WPApiBaseModel,f=a("bandstand").settings();d=e.extend({methods:["GET","POST","PUT","PATCH","DELETE"],urlRoot:function(){return f.restUrl+"bandstand/v1/venues"},defaults:{id:null,address:"",city:"",country:"",name:"",phone:"",postal_code:"",region:"",status:"draft",timezone_id:f.defaultTimeZoneId||"",website_url:""}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bandstand:"bandstand"}],6:[function(a,b,c){(function(c){"use strict";function d(a){var b,c={};return b={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"},h.each(a,function(a){var d=a.types[0];b[d]&&(c[d]=a[b[d]])}),c}function e(a,b,c){return g.ajax({url:"https://maps.googleapis.com/maps/api/timezone/json",data:{location:b+","+c,key:f.googleMapsApiKey,timestamp:parseInt(Math.floor(Date.now()/1e3),10)}}).done(function(b){a.find('option[value="'+b.timeZoneId+'"]').attr("selected",!0).end().trigger("change")})}var f,g="undefined"!=typeof window?window.jQuery:"undefined"!=typeof c?c.jQuery:null,h="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,i=a("bandstand");f=i.settings(),b.exports=function(a){var b,c=a.fields||{};b=new google.maps.places.Autocomplete(a.input,{types:[a.type]}),b.addListener("place_changed",function(){var a=b.getPlace(),f=d(a.address_components),g=a.geometry.location;c.name&&c.name.val(a.name).trigger("change"),c.address&&c.address.val(f.street_number+" "+f.route).trigger("change"),c.city&&c.city.val(f.locality).trigger("change"),c.region&&c.region.val(f.administrative_area_level_1).trigger("change"),c.postalCode&&c.postalCode.val(f.postal_code).trigger("change"),c.country&&c.country.val(f.country).trigger("change"),c.phone&&c.phone.val(a.formatted_phone_number).trigger("change"),c.website_url&&c.website_url.val(a.website).trigger("change"),c.timeZone&&e(c.timeZone,g.lat(),g.lng())})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bandstand:"bandstand"}],7:[function(a,b,c){"use strict";b.exports={isAddressEmpty:function(){return!(this.address||this.city||this.region||this.postal_code||this.country)},formatCityRegionPostalCode:function(){var a="";return this.city&&(a+=this.city),this.region&&(a=""===a?this.region:a+", "+this.region),this.postal_code&&(a=""===a?this.postal_code:a+" "+this.postal_code),a}}},{}],8:[function(a,b,c){(function(c){"use strict";var d,e=a("bandstand").l10n,f="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=f.media.View.extend({className:"button",tagName:"button",events:{click:"openModal"},render:function(){return this.$el.text(e.selectVenue||"Select Venue"),this},openModal:function(a){a.preventDefault(),this.controller.get("frame").open()}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bandstand:"bandstand"}],9:[function(a,b,c){(function(c){"use strict";var d,e=a("../venue/add-form"),f="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=f.media.View.extend({className:"bandstand-venue-frame-content bandstand-venue-frame-content--add",initialize:function(a){this.model=a.model},render:function(){return this.views.add([new e({model:this.model})]),this}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../venue/add-form":17}],10:[function(a,b,c){(function(c){"use strict";var d,e=a("../venue/panel"),f=a("../venues-list"),g=a("../venues-search"),h="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=h.media.View.extend({className:"bandstand-venue-frame-content",initialize:function(a){var b=a.collection,c=a.selection;this.controller=a.controller,this.collection=a.collection,this.results=a.results,this.selection=a.selection,this.collection.length||this.collection.fetch({data:{context:"edit"},remove:!1}).done(function(){c.length||c.reset(b.first())})},render:function(){return this.views.add([new g({controller:this.controller}),new f({controller:this.controller,collection:this.collection,results:this.results,selection:this.selection}),new e({controller:this.controller,selection:this.selection})]),this}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../venue/panel":21,"../venues-list":23,"../venues-search":24}],11:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,e="undefined"!=typeof window?window.wp:"undefined"!=typeof a?a.wp:null;c=e.media.view.Frame.extend({className:"media-frame",template:e.media.template("media-frame"),regions:["menu","title","content","toolbar"],initialize:function(){e.media.view.Frame.prototype.initialize.apply(this,arguments),d.defaults(this.options,{title:"",modal:!0}),this.$el.addClass("wp-core-ui"),this.options.modal&&(this.modal=new e.media.view.Modal({controller:this,title:this.options.title}),this.modal.content(this)),this.on("attach",d.bind(this.views.ready,this.views),this),this.on("title:create:default",this.createTitle,this),this.title.mode("default"),this.on("menu:create:default",this.createMenu,this)},render:function(){return!this.state()&&this.options.state&&this.setState(this.options.state),e.media.view.Frame.prototype.render.apply(this,arguments)},createMenu:function(a){a.view=new e.media.view.Menu({controller:this})},createTitle:function(a){a.view=new e.media.View({controller:this,tagName:"h1"})},createToolbar:function(a){a.view=new e.media.view.Toolbar({controller:this})}}),d.each(["open","close","attach","detach","escape"],function(a){c.prototype[a]=function(){return this.modal&&this.modal[a].apply(this.modal,arguments),this}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("../frame"),g=a("../content/venue-add"),h=a("../../controllers/venue-add"),i=a("../toolbar/venue-add"),j=a("../toolbar/venue-select"),k=a("../content/venues"),l=a("../../controllers/venues");d=f.extend({className:"media-frame bandstand-venue-frame",initialize:function(){f.prototype.initialize.apply(this,arguments),e.defaults(this.options,{title:"",modal:!0,state:"venues"}),this.createStates(),this.bindHandlers()},createStates:function(){this.states.add(new l({})),this.states.add(new h({}))},bindHandlers:function(){this.on("content:create:venues-manager",this.createContent,this),this.on("toolbar:create:venues",this.createSelectToolbar,this),this.on("toolbar:create:venue-add",this.createAddToolbar,this),this.on("content:render:venue-add",this.renderAddContent,this)},createContent:function(a){a.view=new k({controller:this,collection:this.state().get("venues"),results:this.state().get("results"),selection:this.state().get("selection")})},createSelectToolbar:function(a){a.view=new j({controller:this,selection:this.state().get("selection")})},createAddToolbar:function(a){a.view=new i({controller:this,model:this.state("venue-add").get("model")})},renderAddContent:function(){this.content.set(new g({model:this.state("venue-add").get("model")}))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../controllers/venue-add":3,"../../controllers/venues":4,"../content/venue-add":9,"../content/venues":10,"../frame":11,"../toolbar/venue-add":15,"../toolbar/venue-select":16}],13:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("../utils/template-helpers"),g="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=g.media.View.extend({className:"bandstand-gig-venue-details",template:g.template("bandstand-gig-venue-details"),initialize:function(a){this.model=a.model,this.listenTo(this.model,"change",this.render)},render:function(){var a;return this.model.get("id")?(a=e.extend(this.model.toJSON(),f),this.$el.html(this.template(a))):this.$el.empty(),this}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/template-helpers":7}],14:[function(a,b,c){(function(c){"use strict";var d,e=a("../gig-venue-details"),f=a("../button/gig-venue-select"),g="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=g.media.View.extend({el:"#bandstand-gig-venue-meta-box",initialize:function(a){this.controller=a.controller,this.listenTo(this.controller,"change:venue",this.render),this.controller.get("frame").on("open",this.updateSelection,this)},render:function(){return this.views.set(".bandstand-panel-body",[new e({model:this.controller.get("venue")}),new f({controller:this.controller})]),this},updateSelection:function(){var a=this.controller.get("frame"),b=this.controller.get("venue"),c=a.states.get("venues").get("venues"),d=a.states.get("venues").get("selection");b.get("id")&&(c.add(b,{at:0}),d.reset(b))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../button/gig-venue-select":8,"../gig-venue-details":13}],15:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("../../models/venue"),g="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=g.media.view.Toolbar.extend({initialize:function(a){this.controller=a.controller,this.model=a.model,e.bindAll(this,"saveVenue"),this.options.items=e.defaults(this.options.items||{},{save:{text:this.controller.state().get("button").text,style:"primary",priority:80,requires:!1,click:this.saveVenue},spinner:new g.media.view.Spinner({priority:60})}),this.options.items.spinner.delay=0,this.listenTo(this.model,"change:name",this.toggleButtonState),g.media.view.Toolbar.prototype.initialize.apply(this,arguments)},render:function(){return this.$button=this.get("save").$el,this.toggleButtonState(),this},saveVenue:function(){var a=this.controller,b=this.model,c=this.get("spinner").show();b.save().done(function(d){var e=a.state("venues");e.get("venues").add(b),e.get("selection").reset(b),e.set("mode","view"),a.state().set("model",new f({status:"publish"})),a.setState("venues"),c.hide()})},toggleButtonState:function(){this.$button.attr("disabled",""===this.model.get("name"))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../models/venue":5}],16:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,e="undefined"!=typeof window?window.wp:"undefined"!=typeof a?a.wp:null;c=e.media.view.Toolbar.extend({initialize:function(a){var b=a.selection;this.controller=a.controller,this.options.items=d.defaults(this.options.items||{},{select:{text:this.controller.state().get("button").text,style:"primary",priority:80,requires:{selection:!0},click:function(){this.controller.state().trigger("insert",b),this.controller.close()}}}),e.media.view.Toolbar.prototype.initialize.apply(this,arguments)}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window.jQuery:"undefined"!=typeof c?c.jQuery:null,f="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null,g=a("../../utils/place-autocomplete");d=f.media.View.extend({tagName:"div",className:"bandstand-venue-edit-form",template:f.template("bandstand-venue-edit-form"),events:{"change [data-setting]":"updateAttribute"},initialize:function(a){this.model=a.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),g({input:this.$('[data-setting="name"]')[0],fields:{name:this.$('[data-setting="name"]'),address:this.$('[data-setting="address"]'),city:this.$('[data-setting="city"]'),region:this.$('[data-setting="region"]'),postalCode:this.$('[data-setting="postal_code"]'),country:this.$('[data-setting="country"]'),timeZone:this.$('[data-setting="timezone_string"]'),phone:this.$('[data-setting="phone"]'),website_url:this.$('[data-setting="website_url"]')},type:"establishment"}),g({input:this.$('[data-setting="city"]')[0],fields:{city:this.$('[data-setting="city"]'),region:this.$('[data-setting="region"]'),country:this.$('[data-setting="country"]'),timeZone:this.$('[data-setting="timezone_string"]')},type:"(cities)"}),this},updateAttribute:function(a){var b=e(a.target).data("setting"),c=a.target.value;this.model.get(b)!==c&&this.model.set(b,c)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/place-autocomplete":6}],18:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("../../utils/template-helpers"),g="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=g.media.View.extend({tagName:"div",className:"bandstand-venue-details",template:g.template("bandstand-venue-details"),initialize:function(a){this.model=a.model},render:function(){var a=e.extend(this.model.toJSON(),f);return this.$el.html(this.template(a)),this}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/template-helpers":7}],19:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window.jQuery:"undefined"!=typeof c?c.jQuery:null,f="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null,g=a("../../utils/place-autocomplete");d=f.media.View.extend({tagName:"div",className:"bandstand-venue-edit-form",template:f.template("bandstand-venue-edit-form"),events:{"change [data-setting]":"updateAttribute"},initialize:function(a){this.model=a.model,this.$spinner=e('<span class="spinner"></span>')},render:function(){var a=this.model.get("timezone_id");return this.$el.html(this.template(this.model.toJSON())),a&&this.$el.find("#venue-timezone-id").find('option[value="'+a+'"]').prop("selected",!0),g({input:this.$('[data-setting="name"]')[0],fields:{name:this.$('[data-setting="name"]'),address:this.$('[data-setting="address"]'),city:this.$('[data-setting="city"]'),region:this.$('[data-setting="region"]'),postalCode:this.$('[data-setting="postal_code"]'),country:this.$('[data-setting="country"]'),timeZone:this.$('[data-setting="timezone_string"]'),phone:this.$('[data-setting="phone"]'),website_url:this.$('[data-setting="website_url"]')},type:"establishment"}),g({input:this.$('[data-setting="city"]')[0],fields:{city:this.$('[data-setting="city"]'),region:this.$('[data-setting="region"]'),country:this.$('[data-setting="country"]'),timeZone:this.$('[data-setting="timezone_string"]')},type:"(cities)"}),this},updateAttribute:function(a){var b=e(a.target),c=b.data("setting"),d=a.target.value,f=this.$spinner;this.model.get(c)!==d&&(f.insertAfter(b).addClass("is-active"),this.model.set(c,d).save().always(function(){f.removeClass("is-active")}))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/place-autocomplete":6}],20:[function(a,b,c){(function(c){"use strict";var d,e=a("bandstand").l10n,f="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=f.media.View.extend({tagName:"div",className:"bandstand-venue-panel-title",template:f.template("bandstand-venue-panel-title"),events:{"click button":"toggleMode"},initialize:function(a){this.model=a.model,this.listenTo(this.model,"change:name",this.updateTitle)},render:function(){var a=this.controller.state("venues"),b=a.get("mode");return this.$el.html(this.template(this.model.toJSON())),this.$el.find("button").text("edit"===b?e.view||"View":e.edit||"Edit"),this},toggleMode:function(a){var b=this.controller.state().get("mode");a.preventDefault(),this.controller.state().set("mode","edit"===b?"view":"edit")},updateTitle:function(){this.$el.find("h2").text(this.model.get("name"))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bandstand:"bandstand"}],21:[function(a,b,c){(function(c){"use strict";var d,e=a("./details"),f=a("./edit-form"),g=a("./panel-title"),h="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=h.media.View.extend({tagName:"div",className:"bandstand-venue-panel",initialize:function(a){this.controller=a.controller,this.selection=a.selection,this.listenTo(this.selection,"reset",this.render),this.listenTo(this.controller.state(),"change:mode",this.render)},render:function(){var a,b=this.selection.first();return this.selection.length?(a="edit"===this.controller.state().get("mode")?new f({model:b}):new e({model:b}),this.views.set([new g({controller:this.controller,model:b}),a]),this):this}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./details":18,"./edit-form":19,"./panel-title":20}],22:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window.wp:"undefined"!=typeof a?a.wp:null;c=d.media.View.extend({tagName:"li",className:"bandstand-venues-list-item",events:{click:"setSelection"},initialize:function(a){this.controller=a.controller,this.model=a.model,this.selection=a.selection,this.selection.on("reset",this.updateSelected,this),this.listenTo(this.model,"change:name",this.render)},render:function(){return this.$el.html(this.model.get("name")),this.updateSelected(),this},setSelection:function(){this.selection.reset(this.model)},updateSelected:function(){var a=this.controller.state("venues"),b=this.selection.first()===this.model;this.$el.toggleClass("is-selected",b),b&&a.set("selectedItem",this.$el)}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("./venues-list-item"),g="undefined"!=typeof window?window.wp:"undefined"!=typeof c?c.wp:null;d=g.media.View.extend({tagName:"div",className:"bandstand-venues",initialize:function(a){var b;this.controller=a.controller,this.collection=a.collection,this.results=a.results,this.selection=a.selection,b=this.controller.state(),this.listenTo(b,"change:provider",this.switchCollection),this.listenTo(this.collection,"add",this.addVenue),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.results,"reset",this.render),this.listenTo(b,"change:selectedItem",this.maybeMakeItemVisible)},render:function(){return this.$el.off("scroll").on("scroll",e.bind(this.scroll,this)).html("<ul />"),this.collection.length&&this.collection.each(this.addVenue,this),this},addVenue:function(a){var b=new f({controller:this.controller,model:a,selection:this.selection}).render();this.$el.children("ul").append(b.el)},maybeMakeItemVisible:function(){var a=this.controller.state().get("selectedItem"),b=a.outerHeight(),c=a.position().top;c>this.el.clientHeight+this.el.scrollTop-b?this.el.scrollTop=c-this.el.clientHeight+b:c<this.el.scrollTop&&(this.el.scrollTop=c)},scroll:function(){this.el.scrollHeight<this.el.scrollTop+3*this.el.clientHeight&&this.collection.hasMore()&&this.collection.more({remove:!1})},switchCollection:function(){var a=this.controller.state(),b=a.get("provider");this.collection=a.get(b),this.render()}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./venues-list-item":22}],24:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window.wp:"undefined"!=typeof a?a.wp:null;c=d.media.View.extend({tagName:"div",className:"bandstand-venues-search",template:d.template("bandstand-venues-search-field"),events:{"keyup input":"search","search input":"search"},render:function(){return this.$field=this.$el.html(this.template()).find("input"),this},search:function(){var a=this,b=this.controller.state();clearTimeout(this.timeout),this.timeout=setTimeout(function(){b.search(a.$field.val())},300)}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){"use strict";b.exports={formatTime:function(a){var b,c,d,e="";return d=parseInt(a,10)%60,c=Math.floor(a/60)%60,b=Math.floor(a/3600),d=d<10?"0"+d:d,b&&(c=c<10?"0"+c:c,e+=b+":"),e+=c+":"+d}}},{}],bandstand:[function(a,b,c){(function(c){"use strict";function d(){var a={};e.extend(this,{collection:{},controller:{},l10n:{},model:{},util:f,view:{}}),this.settings=function(b){return b&&e.extend(a,b),a.l10n&&(this.l10n=e.extend(this.l10n,a.l10n),delete a.l10n),a||{}}}var e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("./utils");c.bandstand=c.bandstand||new d,b.exports=c.bandstand}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":25}]},{},[1]);
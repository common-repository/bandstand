require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){"use strict";var c="undefined"!=typeof window?window._:"undefined"!=typeof b?b._:null,d=a("bandkit"),e=a("cuebone");c.extend(d,{players:e.players})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bandkit:"bandkit",cuebone:3}],2:[function(a,b,c){"use strict";b.exports={formatTime:function(a){var b,c,d,e="";return d=parseInt(a,10)%60,c=Math.floor(a/60)%60,b=Math.floor(a/3600),d=10>d?"0"+d:d,b&&(c=10>c?"0"+c:c,e+=b+":"),e+=c+":"+d}}},{}],3:[function(a,b,c){(function(c){"use strict";var d="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,e="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,f={},g=a("./src/adapters/jplayer"),h=a("./src/adapters/mediaelementjs");d.extend(f,{players:{},collection:{},controller:{},model:{}}),f.Events=d.extend({},e.Events),f.controller.Mediator=a("./src/controllers/mediator"),f.controller.Player=a("./src/controllers/player.js"),f.model.Track=a("./src/models/track.js"),f.collection.Tracks=a("./src/collections/tracks.js"),f.players=new f.controller.Mediator([],{events:f.Events}),f.players.jplayer=new g(f.players,f.Events),f.players.mediaelementjs=new h(f.players,f.Events),b.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./src/adapters/jplayer":4,"./src/adapters/mediaelementjs":5,"./src/collections/tracks.js":6,"./src/controllers/mediator":7,"./src/controllers/player.js":8,"./src/models/track.js":10}],4:[function(a,b,c){(function(a){"use strict";function c(a,b){this.events=b,this.collection=a,this.model=d,this.initialize()}var d,e="undefined"!=typeof window?window.jQuery:"undefined"!=typeof a?a.jQuery:null,f="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,g="undefined"!=typeof window?window.Backbone:"undefined"!=typeof a?a.Backbone:null;d=g.Model.extend({defaults:{id:null,player:null},initialize:function(a,b){var c=this.get("player");this.events=b.events,c.on(e.jPlayer.event.play,f.bind(this.onPlay,this))},pause:function(){this.get("player").jPlayer("pause")},onPlay:function(){this.events.trigger("play",this)}}),c.prototype.initialize=function(){var a,b=this;f.isFunction(e.jPlayer)&&(a=e.jPlayer.prototype._init,e.jPlayer.prototype._init=function(){a.apply(this,arguments),b.register(this.internal.instance,this.element)},this.registerPlayers())},c.prototype.registerPlayers=function(){f.isFunction(e.jPlayer)&&f.each(e.jPlayer.prototype.instances,function(a,b){this.register(b,a)},this)},c.prototype.register=function(a,b){var c=new this.model({id:a,player:b},{events:this.events});this.collection.add(c)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(a,b,c){(function(a){"use strict";function c(a,b){this.events=b,this.collection=a,this.model=d,this.initialize()}var d,e="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof a?a.Backbone:null,g="undefined"!=typeof window?window.mejs:"undefined"!=typeof a?a.mejs:null;d=f.Model.extend({defaults:{id:null,player:null},initialize:function(a,b){this.events=b.events,this.get("player").$media.on("play",e.bind(this.onPlay,this))},pause:function(){this.get("player").pause()},onPlay:function(){this.events.trigger("play",this)}}),c.prototype.initialize=function(){var a,b=this;e.isUndefined(g)||(a=g.MediaElementPlayer.prototype.init,g.MediaElementPlayer.prototype.init=function(){a.apply(this,arguments),b.register(this)},this.registerPlayers())},c.prototype.registerPlayers=function(){e.isUndefined(g)||e.each(g.players,function(a){this.register(a)},this)},c.prototype.register=function(a){var b=new this.model({id:a.id,player:a},{events:this.events});this.collection.add(b)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window.jQuery:"undefined"!=typeof c?c.jQuery:null,f="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,g="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,h=a("../models/track.js");d=g.Collection.extend({model:h,initialize:function(a,b){this.options=f.extend({id:"cuebone-default-tracks"},b)},fetch:function(){var a,b=e.Deferred();return a=JSON.parse(localStorage.getItem(this.options.id)),null!==a&&this.reset(a),b.resolve(a).promise()},save:function(){localStorage.setItem(this.options.id,JSON.stringify(this.toJSON()))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/track.js":10}],7:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,e="undefined"!=typeof window?window.Backbone:"undefined"!=typeof a?a.Backbone:null;c=e.Collection.extend({initialize:function(a,b){this.listenTo(b.events,"play",this.pauseOthers)},pauseOthers:function(a){d.chain(this.models).without(a).invoke("pause")}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,g=0,h=a("../collections/tracks");d=f.Model.extend({defaults:{id:null,currentTrackIndex:0,loop:!1,muted:!1,repeat:!1,shuffle:!1,volume:.8},initialize:function(a,b){var c=window.navigator.userAgent.toLowerCase();return this.mediaElement=document.createElement("audio"),this.options=e.extend({events:null,persist:!1,tracks:null},b),this.get("id")||(this.set("id","cuebone-player-"+g),this.options.persist=!1,g++),this.isAndroid=null!==c.match(/android/i),this.isiPad=null!==c.match(/ipad/i),this.isiPhone=null!==c.match(/iphone/i),this.isiOS=this.isiPhone||this.isiPad,this.current=new h,this.media=new f.Collection,this.tracks=this.options.tracks||new h([{}]),delete this.options.tracks,this.options.persist&&(this.fetchTracks(),this.on("change",this.save,this),this.current.on("add change remove reset",this.save,this),this.media.on("add change remove reset",this.save,this),this.tracks.on("add remove reset",this.tracks.save,this.tracks)),this.listenTo(this.media,"ended",this.onTrackEnded),this.listenTo(this.tracks,"reset",this.onTracksReset),this.fetch(),this},getCurrentTrack:function(){return this.current.first()},isMuted:function(){return!!this.get("muted")},loadTrack:function(a){var b=this.current.first();this.pause(),b&&(b.media.set("status","error"===b.get("status")?"error":"paused"),b.media.unload()),this.set("status","loading"),this.current.reset(a),this.media.reset(a.media),a.media.mediaElement=this.mediaElement,a.media.load()},mute:function(){return this.current.first().media.mute(),this.set("muted",!0),this},nextTrack:function(){var a,b=this.get("currentTrackIndex");return a=this.get("shuffle")?Math.floor(Math.random()*this.tracks.length):b+1>=this.tracks.length?0:b+1,this.setCurrentTrack(a),this},pause:function(){return this.current.length&&this.current.first().media.pause(),this},play:function(){return this.options.events.trigger("play",this),this.current.first().media.play(),this},previousTrack:function(){var a=this.get("currentTrackIndex"),b=0>a-1?this.tracks.length-1:a-1;return this.setCurrentTrack(b),this},seekTo:function(a){return this.current.first().media.seekTo(a),this},setCurrentTrack:function(a){for(;a>=this.tracks.length;)a--;return a===this.get("currentTrackIndex")&&this.current.length||(this.set("currentTrackIndex",a),this.loadTrack(this.tracks.at(a))),this},setVolume:function(a){return this.current.first().media.setVolume(a),this.unmute(),this.set("volume",a),this},unmute:function(){return this.current.first().media.unmute(),this.set("muted",!1),this},fetch:function(){var a,b=this.get("id");return this.options.persist?(a=JSON.parse(localStorage.getItem(b)),null===a?void this.setCurrentTrack(this.get("currentTrackIndex")):(this.setCurrentTrack(a.currentTrackIndex),this.seekTo(a.current_time),this.set({loop:a.loop,repeat:a.repeat,shuffle:a.shuffle}),void("playing"!==a.status||this.isAndroid||this.isiOS||this.play()))):void this.setCurrentTrack(this.get("currentTrackIndex"))},fetchTracks:function(){var a=this.get("id"),b=localStorage.getItem(a+"-signature");return"signature"in this.options&&b!==this.options.signature?(localStorage.removeItem(a),localStorage.removeItem(a+"-signature"),void localStorage.removeItem(a+"-tracks")):void this.tracks.fetch()},save:function(){var a,b,c=this.get("id");this.options.persist&&(a=this.toJSON(),a.current_time=0,a.status="paused",this.current.length&&(b=this.current.first(),a.current_time=b.media.get("current_time"),a.status=b.media.get("status")),localStorage.setItem(c,JSON.stringify(a)),"signature"in this.options&&localStorage.setItem(c+"-signature",this.options.signature))},onTrackEnded:function(){this.get("repeat")?this.seekTo(0).play():this.get("currentTrackIndex")<this.tracks.length-1||this.get("loop")||this.get("shuffle")?(this.nextTrack().play(),this.play()):this.nextTrack().pause()},onTracksReset:function(){this.set("currentTrackIndex",null)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../collections/tracks":6}],9:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window.jQuery:"undefined"!=typeof a?a.jQuery:null,e="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof a?a.Backbone:null;c=f.Model.extend({defaults:{current_time:0,duration:0,loaded:0,source:"",status:"",track:null,type:""},initialize:function(a,b){this.canPlay=d.Deferred(),this.mediaElement=null,this.ready=d.when(this.canPlay),e.bindAll(this,"onEnded","onError","onLoadedMetadata","onPause","onPlaying","onReady","onTimeUpdate","updateLoaded")},getProgress:function(){var a=this.get("current_time"),b=this.get("duration");return a/b},load:function(){return this.set("status","loading"),this.mediaElement?(this.mediaElement.setAttribute("preload","auto"),this.mediaElement.setAttribute("src",this.get("source")),this.mediaElement.setAttribute("type",this.get("type")),this.mediaElement.addEventListener("canplay",this.onReady),this.mediaElement.addEventListener("loadedmetadata",this.onReady),this.mediaElement.addEventListener("ended",this.onEnded),this.mediaElement.addEventListener("loadedmetadata",this.onLoadedMetadata),this.mediaElement.addEventListener("error",this.onError),this.mediaElement.addEventListener("pause",this.onPause),this.mediaElement.addEventListener("playing",this.onPlaying),this.mediaElement.addEventListener("loadedmetadata",this.onTimeUpdate),this.mediaElement.addEventListener("timeupdate",this.onTimeUpdate),this.mediaElement.addEventListener("progress",this.updateLoaded),this.mediaElement.addEventListener("timeupdate",this.updateLoaded),void this.mediaElement.load()):void this.set("status","error")},unload:function(){this.set("status","paused"),this.mediaElement.removeEventListener("canplay",this.onReady),this.mediaElement.removeEventListener("loadedmetadata",this.onReady),this.mediaElement.removeEventListener("ended",this.onEnded),this.mediaElement.removeEventListener("loadedmetadata",this.onLoadedMetadata),this.mediaElement.removeEventListener("error",this.onError),this.mediaElement.removeEventListener("pause",this.onPause),this.mediaElement.removeEventListener("playing",this.onPlaying),this.mediaElement.removeEventListener("loadedmetadata",this.onTimeUpdate),this.mediaElement.removeEventListener("timeupdate",this.onTimeUpdate),this.mediaElement.removeEventListener("progress",this.updateLoaded),this.mediaElement.removeEventListener("timeupdate",this.updateLoaded)},mute:function(){this.mediaElement.muted=!0},pause:function(){this.mediaElement&&this.mediaElement.pause(),this.set("status","paused")},play:function(){var a=this;this.ready.done(function(){a.mediaElement.play(),a.set("status","playing")})},seekTo:function(a){var b,c,f=d.Deferred(),g=this.mediaElement;e.isUndefined(a)||(this.ready=d.when(this.canPlay,f),c=function(){return 4===g.readyState?(g.currentTime=a,clearInterval(b),f.resolve(),!0):!1},c()||(b=setInterval(c,50)))},setVolume:function(a){this.mediaElement.volume=a},unmute:function(){this.mediaElement.muted=!1},onError:function(){this.set("status","error")},onEnded:function(){this.trigger("ended")},onLoadedMetadata:function(){this.set("duration",this.mediaElement.duration)},onPause:function(){this.set("status","paused")},onPlaying:function(){this.set("status","playing")},onReady:function(){this.canPlay.resolve(),this.set("status","ready")},onTimeUpdate:function(){this.mediaElement&&this.set("current_time",this.mediaElement.currentTime)},updateLoaded:function(){var a;try{a=this.mediaElement.buffered.end(this.mediaElement.buffered.length-1),this.set("loaded",a/this.mediaElement.duration*100)}catch(b){}}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b,c){(function(c){"use strict";var d,e=("undefined"!=typeof window?window.jQuery:"undefined"!=typeof c?c.jQuery:null,"undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,"undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null),f=a("./media");d=e.Model.extend({defaults:{artist:"",artwork_url:"",download_url:"",duration:"",purchase_url:"",record_id:null,stream_url:"",title:"",track_number:""},initialize:function(a,b){this.media=new f({source:this.get("stream_url"),track:this})}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./media":9}],bandkit:[function(a,b,c){(function(c){"use strict";function d(){var a={};e.extend(this,{collection:{},controller:{},l10n:{},model:{},util:f,view:{}}),this.settings=function(b){return b&&e.extend(a,b),a.l10n&&(this.l10n=e.extend(this.l10n,a.l10n),delete a.l10n),a||{}}}var e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("./utils");c.bandkit=c.bandkit||new d,b.exports=c.bandkit}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":2}]},{},[1]);